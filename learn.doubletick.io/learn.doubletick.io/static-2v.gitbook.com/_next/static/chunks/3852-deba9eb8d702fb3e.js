"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3852],{13885:(e,t,s)=>{s.r(t),s.d(t,{AIResponseFeedback:()=>u});var n=s(54202),a=s(83372),l=s(38103),r=s(23449),i=s(59282),o=s(70932),c=s(86181);function u(e){let{className:t,responseId:s,query:u}=e,d=(0,a.ok)(),[h,m]=(0,i.useState)(null),p=(0,o.jt)(),f=e=>{m(e),p({type:"ask_rate_response",query:u,responseId:s,rating:e})};return(0,n.jsxs)("div",{className:(0,r.P)("flex h-fit items-center",t),children:[(0,n.jsx)(c.$n,{icon:"thumbs-up",iconOnly:!0,label:(0,l.s)(d,"was_this_helpful_positive_label"),variant:"blank",className:(0,r.P)("animate-fade-in overflow-hidden text-tint-subtle transition-all",null!==h&&1!==h&&"px-0 text-[0rem] opacity-0"),size:"medium",style:{animationDuration:".5s"},onClick:()=>f(1),disabled:null!==h,active:1===h},"positive"),(0,n.jsx)(c.$n,{icon:"thumbs-down",iconOnly:!0,label:(0,l.s)(d,"was_this_helpful_negative_label"),variant:"blank",className:(0,r.P)("animate-fade-in overflow-hidden text-tint-subtle transition-all",null!==h&&-1!==h&&"px-0 text-[0rem] opacity-0"),size:"medium",style:{animationDelay:".2s",animationDuration:".5s"},onClick:()=>f(-1),disabled:null!==h,active:-1===h},"negative"),null!==h?(0,n.jsx)("span",{className:"ml-2 animate-fade-in-slow text-tint-subtle",style:{animationDelay:".3s"},children:(0,l.t)(d,"was_this_helpful_thank_you")}):null]})}},23922:(e,t,s)=>{s.r(t),s.d(t,{AIChatProvider:()=>v,useAIChatController:()=>b,useAIChatState:()=>g});var n=s(54202),a=s(80532),l=s(83372),r=s(38103),i=s(65179),o=s(59282),c=s(70932),u=s(99682),d=s(81493),h=s(41758);let m=(0,h.createServerReference)("407774bff38bbe38573983d5883b56b06b74fce4b0",h.callServer,void 0,h.findSourceMapURL,"streamAIChatResponse");var p=s(10330);let f=o.createContext(null),x=a.v(()=>({opened:!1,responseId:null,messages:[],query:null,followUpSuggestions:[],pendingTools:[],loading:!1,error:!1,initialQuery:null}));function g(){return a.P(x)}function v(e){let{renderMessageOptions:t,children:s}=e,a=function(){let e=function(){let e=(0,p.aP)();return o.useMemo(()=>({location:e?{spaceId:e.spaceId,pageId:e.pageId}:void 0}),[e])}(),t=o.useRef(e);return o.useEffect(()=>{t.current=e},[e]),t}(),h=(0,c.jt)(),[,g]=(0,d.SQ)(),v=(0,l.ok)(),b=o.useCallback(()=>{let{initialQuery:e}=x.getState();x.setState(e=>({...e,opened:!0})),g(t=>{var s,n,a,l;return{ask:null!=(n=null!=(s=null==t?void 0:t.ask)?s:e)?n:"",query:null!=(a=null==t?void 0:t.query)?a:null,scope:null!=(l=null==t?void 0:t.scope)?l:"default",open:!1}})},[g]),_=o.useCallback(()=>{x.setState(e=>({...e,opened:!1})),g(e=>{var t,s;return{ask:null,query:null!=(t=null==e?void 0:e.query)?t:null,scope:null!=(s=null==e?void 0:e.scope)?s:"default",open:!1}})},[g]),y=o.useCallback(async e=>{x.setState(e=>({...e,followUpSuggestions:[],pendingTools:[],loading:!0,error:!1,messages:[...e.messages,{role:i.W7.Assistant,content:null}]}));let s=async e=>{let t=u.By.getState().tools.find(t=>t.name===e.toolCall.tool);if(!t)throw Error("Tool ".concat(e.toolCall.tool," not found"));try{let s=await t.execute(e.toolCall.input);y({toolCall:{tool:e.toolCall.tool,toolCallId:e.toolCallId,output:s.output,summary:s.summary}})}catch(t){y({toolCall:{tool:e.toolCall.tool,toolCallId:e.toolCallId,output:{error:t instanceof Error?t.message:"Unknown error"},summary:{icon:"bomb",text:"An error occurred while executing the tool"}}})}},n=null;try{var l,o,c,d;let h=u.By.getState().tools;for await(let u of(await m({message:e.message,toolCall:e.toolCall,messageContext:a.current,previousResponseId:null!=(l=x.getState().responseId)?l:void 0,tools:h.map(e=>({name:e.name,description:e.description,inputSchema:e.inputSchema})),options:{withLinkPreviews:null==(o=null==t?void 0:t.withLinkPreviews)||o,withToolCalls:null==(c=null==t?void 0:t.withToolCalls)||c,asEmbeddable:null!=(d=null==t?void 0:t.asEmbeddable)&&d}}))){if(!u)continue;if(e.message&&x.getState().query!==e.message)break;let t=u.event;switch(t.type){case"response_finish":x.setState(e=>({...e,responseId:t.responseId,loading:!1,error:!1}));break;case"response_followup_suggestion":x.setState(e=>({...e,followUpSuggestions:[...e.followUpSuggestions,...t.suggestions]}));break;case"response_tool_call_pending":{let e=h.find(e=>e.name===t.toolCall.tool);if(!e)throw Error("Tool ".concat(t.toolCall.tool," not found"));let a=e.confirmation;a?x.setState(e=>({...e,pendingTools:[...e.pendingTools,{icon:a.icon,label:a.label,cancelToolCall:{tool:t.toolCall.tool,toolCallId:t.toolCallId,output:{cancelled:"User did not confirm the tool call"},summary:{icon:"forward",text:(0,r.s)(v,"tool_call_skipped",a.label)}},confirm:async()=>{await s(t)}}]})):n=t}}x.setState(e=>({...e,messages:[...e.messages.slice(0,-1),{role:i.W7.Assistant,content:u.content}]}))}n&&await s(n),x.setState(e=>({...e,loading:!1,error:!1}))}catch(e){console.error("Error streaming AI response",e),x.setState(e=>({...e,loading:!1,error:!0}))}},[a.current,null==t?void 0:t.withLinkPreviews,null==t?void 0:t.withToolCalls,null==t?void 0:t.asEmbeddable,v]),j=o.useCallback(async e=>{let{query:t,messages:s,pendingTools:n}=x.getState();if(0===s.length&&g(t=>{var s,n;return{ask:e.message,query:null!=(s=null==t?void 0:t.query)?s:null,scope:null!=(n=null==t?void 0:t.scope)?n:"default",open:!1}}),t===e.message)return;h({type:"ask_question",query:e.message}),x.setState(t=>{var s;return{...t,messages:[...t.messages,{role:i.W7.User,content:e.message,query:e.message}],query:e.message,followUpSuggestions:[],loading:!0,error:!1,initialQuery:null!=(s=t.initialQuery)?s:e.message}});let a=n[0];y({message:e.message,...a?{toolCall:a.cancelToolCall}:{}})},[g,h,y]),k=o.useCallback(()=>{x.setState(e=>({opened:e.opened,loading:!1,messages:[],query:null,followUpSuggestions:[],pendingTools:[],responseId:null,error:!1,initialQuery:null})),g(e=>{var t,s;return{ask:"",query:null!=(t=null==e?void 0:e.query)?t:null,scope:null!=(s=null==e?void 0:e.scope)?s:"default",open:!1}})},[g]),w=o.useMemo(()=>({open:b,close:_,clear:k,postMessage:j}),[b,_,k,j]);return(0,n.jsx)(f.Provider,{value:w,children:s})}function b(){let e=o.useContext(f);if(!e)throw Error("useAIChatController must be used within an AIChatProvider");return e}},24066:(e,t,s)=>{s.r(t),s.d(t,{AIChatControlButton:()=>c});var n=s(54202),a=s(83372),l=s(38103),r=s(57246),i=s(63243),o=s(86181);function c(){let e=(0,a.ok)(),t=(0,i.J4)(),s=(0,i.C8)();return t.messages.length>0?(0,n.jsx)(o.rI,{button:(0,n.jsx)(o.$n,{onClick:()=>{},iconOnly:!0,icon:"ellipsis",label:(0,l.s)(e,"actions"),variant:"blank",size:"default"}),children:(0,n.jsxs)(o._2,{onClick:()=>{s.clear()},children:[(0,n.jsx)(r.Icon,{icon:"broom-wide",className:"size-3 shrink-0 text-tint-subtle"}),(0,l.t)(e,"ai_chat_clear_conversation")]})}):null}},34357:(e,t,s)=>{s.r(t),s.d(t,{ThemeToggler:()=>o});var n=s(54202),a=s(83593),l=s(59282),r=s(83372),i=s(86181);function o(){let e=(0,r.ok)(),[t,s]=l.useState(!1),{theme:o,setTheme:u}=(0,a.D)();l.useEffect(()=>{s(!0)},[]);let d=e=>{u(e)};return(0,n.jsxs)(i.e2,{role:"radiogroup",className:"gap-2",combinedShape:!1,children:[(0,n.jsx)(c,{active:t&&"light"===o,icon:"sun-bright",onClick:()=>d("light"),title:(0,r.si)(e,"switch_to_light_theme")}),(0,n.jsx)(c,{active:t&&"system"===o,icon:"desktop",onClick:()=>d("system"),title:(0,r.si)(e,"switch_to_system_theme")}),(0,n.jsx)(c,{active:t&&"dark"===o,icon:"moon",onClick:()=>d("dark"),title:(0,r.si)(e,"switch_to_dark_theme")})]})}function c(e){let{icon:t,onClick:s,title:a,active:l}=e;return(0,n.jsx)(i.$n,{type:"button",role:"radio",onClick:s,label:a,"aria-checked":l,variant:"blank",size:"default",className:l?"bg-primary theme-muted:bg-primary-hover text-primary-strong ring-primary hover:bg-primary contrast-more:text-primary-strong contrast-more:ring-1 [html.sidebar-filled.theme-bold.tint_&]:bg-primary-hover":"",icon:t,iconOnly:!0})}},36774:(e,t,s)=>{s.d(t,{a:()=>a});var n=s(59282);function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024,[t,s]=n.useState(!1);return n.useEffect(()=>{let t=window.matchMedia("(max-width: ".concat(e-.02,"px)"));s(t.matches);let n=e=>{s(e.matches)};return t.addEventListener("change",n),()=>{t.removeEventListener("change",n)}},[e]),t}},41784:(e,t,s)=>{s.d(t,{Ac:()=>r,Do:()=>i,VN:()=>l,XO:()=>o,a8:()=>d,bY:()=>u,tP:()=>c});var n=s(54202),a=s(23449);let l=s(59282).forwardRef((e,t)=>{let{children:s,...l}=e;return(0,n.jsx)("div",{...l,className:(0,a.P)("flex h-full grow animate-fade-in-slow flex-col overflow-hidden bg-tint-base text-sm text-tint",l.className),ref:t,children:s})});function r(e){let{children:t}=e;return(0,n.jsx)("div",{className:"flex select-none items-center gap-2 border-tint-subtle border-b bg-tint-subtle px-4 py-2 text-tint-strong",children:t})}function i(e){let{children:t}=e;return(0,n.jsx)("div",{className:"flex flex-1 flex-col",children:t})}function o(e){let{children:t}=e;return(0,n.jsx)("div",{className:"flex flex-1 flex-col overflow-hidden",children:t})}function c(e){let{children:t}=e;return(0,n.jsx)("div",{className:"font-bold",children:t})}function u(e){let{children:t,className:s}=e;return(0,n.jsx)("div",{className:(0,a.P)("text-tint text-xs leading-none transition-all duration-500",s),children:t})}function d(e){let{children:t}=e;return(0,n.jsx)("div",{className:"ml-auto flex gap-2",children:t})}},57648:(e,t,s)=>{s.d(t,{S:()=>i});var n=s(54202),a=s(23449),l=s(57246),r=s(59282);function i(e){let{keys:t,className:s}=e,[i,o]=r.useState(null);return r.useEffect(()=>{o(function(){let e=navigator.platform.toLowerCase();return e.includes("mac")?"mac":(e.includes("win"),"win")}())},[]),(0,n.jsx)("div",{"aria-busy":null===i?"true":void 0,className:(0,a.P)('shortcut hidden justify-end gap-0.5 whitespace-nowrap text-tint text-xs [font-feature-settings:"calt","case"] contrast-more:text-tint-strong md:flex',i?"motion-safe:animate-fade-in motion-reduce:opacity-100":"opacity-0"),children:t.map((e,t)=>{let r=e;switch(e){case"mod":r="mac"===i?"⌘":"Ctrl";break;case"enter":r=(0,n.jsx)(l.Icon,{icon:"arrow-turn-down-left",className:"size-[.75em]"})}return(0,n.jsx)("kbd",{className:(0,a.P)("flex h-5 min-w-5 items-center justify-center rounded-md border border-tint-subtle px-1","mod"===e?"mac"===i?"text-sm":"text-xs":"uppercase",s),children:r},t)})})}},61750:(e,t,s)=>{s.r(t),s.d(t,{SearchContainer:()=>H});var n=s(54202),a=s(83372),l=s(65179),r=s(70140),i=s(59282),o=s(97796),c=s(63243),u=s(75265),d=s(70932),h=s(36774),m=s(86181),p=s(38103),f=s(23449),x=s(57246),g=s(42416),v=s(75178);let b=(0,i.createContext)(void 0);function _(e){let{children:t,value:s}=e;return(0,n.jsx)(b.Provider,{value:s,children:t})}var y=s(41758);let j=(0,y.createServerReference)("40895eebe6337810e254f85d6f6974f5f88d47e7da",y.callServer,void 0,y.findSourceMapURL,"streamAskQuestion");var k=s(86628);function w(e){let{query:t}=e,s=(0,a.ok)(),l=(0,d.jt)(),[r,o]=function(){let e=(0,i.useContext)(b);if(!e)throw Error("SearchAskContext is not available");return e}();i.useEffect(()=>{let e=!1;return o({type:"loading"}),(async()=>{l({type:"ask_question",query:t});let{stream:s}=await j({question:t});for await(let t of(0,g.S7)(s)){if(e)return;t&&o({type:"answer",answer:t})}})().catch(()=>{e||o({type:"error"})}),()=>{e=!0}},[t,o,l]),i.useEffect(()=>()=>{o(null)},[o]);let c=(0,n.jsxs)("div",{className:"flex grow flex-col items-center justify-center",children:[(0,n.jsx)("div",{className:"relative",children:(0,n.jsx)(u.ur,{state:"thinking",className:"size-6 text-tint/6"})}),(0,n.jsx)(v.h,{breakLines:!0,className:"text-center"})]});return(0,n.jsxs)("div",{className:"flex min-h-full p-4",children:[(null==r?void 0:r.type)==="answer"?(0,n.jsx)(i.Suspense,{fallback:c,children:(0,n.jsx)(C,{answer:r.answer,placeholder:c,query:t})}):null,(null==r?void 0:r.type)==="error"?(0,n.jsx)("div",{className:(0,f.P)("grow p-4 text-center"),children:(0,p.t)(s,"search_ask_error")}):null,(null==r?void 0:r.type)==="loading"?c:null]})}function C(e){let{query:t,answer:s,placeholder:l}=e,[r,o]=i.useState(null),[c,d]=i.useTransition();i.useEffect(()=>{d(()=>{o(s)})},[s]);let h=(0,a.ok)(),[,x]=(0,k.useSearch)();return r?(0,n.jsxs)("div",{className:(0,f.P)("flex w-full flex-col gap-4"),children:[(0,n.jsxs)("div",{className:"-mt-2 -mr-2 relative flex items-center gap-2",children:[(0,n.jsx)(m.$n,{icon:"chevron-left",variant:"blank",iconOnly:!0,label:(0,p.s)(h,"search_back"),className:"-ml-2 starting:-mr-2 starting:ml-0 starting:w-0 starting:px-0 starting:opacity-0 transition-[all,margin,padding,width,opacity] transition-discrete delay-[0s,2s,2s,2s,2.5s] duration-[.3s,1s,1s,1s,.5s]",onClick:()=>{x(e=>e?{...e,query:e.ask,ask:null}:null)}}),(0,n.jsx)(u.ur,{state:"intro",className:"size-4 text-tint/6"}),(0,n.jsx)("span",{className:"animate-[fadeIn_1s_.5s_both] font-semibold text-tint",children:(0,p.t)(h,"ai_answer")})]}),(0,n.jsx)(N,{query:t,answer:r})]}):(0,n.jsx)(n.Fragment,{children:l})}function N(e){var t;let{query:s,answer:l}=e,r=(0,a.ok)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{"data-testid":"search-ask-answer",className:"animate-fade-in-slow text-tint-strong",children:[null!=(t=l.body)?t:(0,p.t)(r,"search_ask_no_answer"),l.sources.length>0?(0,n.jsx)(u.ph,{query:s,className:"-ml-1 mt-2",responseId:""}):null,l.followupQuestions.length>0?(0,n.jsx)(S,{followupQuestions:l.followupQuestions}):null]}),l.sources.length>0?(0,n.jsx)(I,{sources:l.sources,language:r,hasAnswer:!!l.body}):null]})}function S(e){let{followupQuestions:t}=e,s=(0,k.useSearchLink)();return(0,n.jsx)("div",{className:(0,f.P)("flex","flex-col","flex-wrap","mt-4"),children:t.map(e=>(0,n.jsxs)(m.N_,{className:(0,f.P)("flex","items-center","gap-2","px-4","-mx-4","py-2","rounded-sm","straight-corners:rounded-none","circular-corners:rounded-full","text-tint","hover:bg-tint-hover","focus-within:bg-tint-hover"),...s({ask:e,open:!0}),children:[(0,n.jsx)(x.Icon,{icon:"magnifying-glass",className:(0,f.P)("size-4","shrink-0","mr-2","text-tint-subtle")}),(0,n.jsx)("span",{children:e})]},e))})}function I(e){let{sources:t,language:s,hasAnswer:a}=e;return(0,n.jsxs)("div",{className:(0,f.P)("flex","flex-wrap","gap-2","mt-4","sm:mt-6","pt-4","border-t","border-subtle"),children:[(0,n.jsx)("span",{children:(0,p.t)(s,a?"search_ask_sources":"search_ask_sources_no_answer")}),t.map(e=>(0,n.jsx)("span",{className:(0,f.P)(),children:(0,n.jsxs)(m.N_,{className:(0,f.P)("flex","flex-wrap","gap-1","items-center","text-tint","hover:underline","links-accent:decoration-[3px]","links-accent:underline-offset-4","focus-within:text-primary"),href:e.href,children:[(0,n.jsx)(x.Icon,{icon:"arrow-up-right",className:(0,f.P)("text-tint-subtle","size-4","shrink-0")}),e.title]})},e.id))]})}var q=s(81853),L=s(85372);function P(e){var t;let{query:s,text:a,highlight:l=["-z-1","relative","text-bold","bg-primary","text-contrast-primary","px-0.5","-mx-0.5","py-0.5","rounded-sm","straight-corners:rounded-xs","transition-colors","group-hover:bg-primary-active","group-hover:text-contrast-primary-active","group-[.is-active]:bg-primary-active","group-[.is-active]:text-contrast-primary-active"]}=e,r=(t=a,s.toLowerCase().split(" ").reduce((e,t)=>{var s,n;return s=e,n=t,s.reduce((e,t)=>{if(t.match)return e.push(t),e;let{text:s}=t,a=s.toLowerCase().indexOf(n);if(a>=0){let t=s.slice(0,a),l=s.slice(a,a+n.length),r=s.slice(a+n.length);return t.length>0&&e.push({text:t}),l.length>0&&e.push({text:l,match:n}),r.length>0&&e.push({text:r}),e}return e.push({text:s}),e},[])},[{text:t}]));return(0,n.jsx)("span",{className:(0,f.P)("relative z-2 whitespace-break-spaces"),children:r.map((e,t)=>(0,n.jsx)("span",{className:(0,f.P)(e.match?l:null),children:e.text},t))})}var z=s(86761);let A=i.forwardRef(function(e,t){let{children:s,href:a,active:l,className:r,leadingIcon:i,size:o="medium",action:c,...u}=e;return(0,n.jsxs)(z.Link,{ref:t,href:a,className:(0,f.P)("flex","items-center","gap-3","group","px-4","small"===o?"py-1.5":"py-3","text-tint","hover:bg-tint","hover:text-tint-strong","group","transition-colors","rounded-corners:rounded-md","circular-corners:rounded-2xl",l?["is-active","bg-primary","text-primary-strong","hover:bg-primary"]:null,r),role:"option",...u,children:[(0,n.jsx)("div",{className:"size-4 shrink-0 text-tint-subtle",children:"string"==typeof i?(0,n.jsx)(x.Icon,{icon:i,className:"size-4"}):i}),(0,n.jsx)("div",{className:"grow",children:s}),l?(0,n.jsx)(m.$n,{label:c,iconOnly:!0,variant:"primary",icon:"arrow-turn-down-left"}):(0,n.jsx)("div",{className:"flex size-8 shrink-0 items-center justify-center text-tint-subtle",children:(0,n.jsx)(x.Icon,{icon:"chevron-right",className:"size-3"})})]})}),E=i.forwardRef(function(e,t){var s,l;let{query:r,item:o,active:c,...u}=e,d=(0,a.ok)(),h=null!=(l=null==(s=o.breadcrumbs)?void 0:s.map(e=>(0,n.jsxs)("span",{className:"flex items-center gap-1",children:[e.icon?(0,n.jsx)(x.Icon,{className:"size-3",icon:e.icon}):null,e.label]},e.label)))?l:[];return(0,n.jsxs)(A,{ref:t,href:o.href,active:c,"data-testid":"search-page-result",action:(0,a.si)(d,"view"),leadingIcon:(0,n.jsx)(x.Icon,{icon:"memo",className:"size-4"}),insights:{type:"search_open_result",query:r,result:{pageId:o.pageId,spaceId:o.spaceId}},"aria-label":(0,a.si)(d,"search_page_result_title",o.title),...u,children:[h.length>0?(0,n.jsx)("div",{className:(0,f.P)("text-xs","text-tint/7","contrast-more:text-tint","group-[.is-active]:text-tint","transition-colors","font-normal","uppercase","leading-none","tracking-wider","mb-1","flex","flex-wrap","gap-x-2","gap-y-1","items-center"),children:(h.length>3?[...h.slice(0,2),(0,n.jsx)(x.Icon,{icon:"ellipsis-h",className:"size-3"},"ellipsis"),...h.slice(-1)]:h).map((e,t)=>(0,n.jsxs)(i.Fragment,{children:[0!==t?(0,n.jsx)(x.Icon,{icon:"chevron-right",className:"size-2"},"".concat(e.key,"-icon")):null,(0,n.jsx)("span",{className:"line-clamp-1",children:e})]},t))}):null,(0,n.jsx)("p",{className:"line-clamp-2 font-semibold text-base text-tint-strong leading-snug",children:(0,n.jsx)(P,{query:r,text:o.title})})]})}),R=i.forwardRef(function(e,t){let{question:s,recommended:l=!1,active:r,assistant:i,...o}=e,c=(0,a.ok)(),u=(0,k.useSearchLink)();return(0,n.jsx)(A,{size:l?"small":"medium",action:(0,a.si)(c,"ask",""),ref:t,"data-testid":l?"search-recommended-question":"search-ask-question",scroll:!1,...u({ask:s,query:null,open:"search"===i.mode},()=>{i.open(s)}),active:r,leadingIcon:l?"search":i.icon,className:l?"pr-1.5":"",...o,children:l?s:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"font-semibold text-base text-tint-strong leading-tight",children:(0,a.t)(c,"search_ask",[s])}),(0,n.jsx)("div",{className:"text-sm text-tint-subtle",children:(0,a.t)(c,"search_ask_description",i.label)})]})})}),M=i.forwardRef(function(e,t){let{query:s,item:l,active:r,...i}=e,o=(0,a.ok)();return(0,n.jsx)(A,{ref:t,href:l.href,size:"small",active:r,action:(0,a.si)(o,"view"),"data-testid":"search-page-section-result",insights:{type:"search_open_result",query:s,result:{pageId:l.pageId,spaceId:l.spaceId}},"aria-label":l.title?(0,a.si)(o,"search_section_result_title",l.title):l.body?(0,a.si)(o,"search_section_result_content",function(e,t){let s=e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase());return s<20?e.slice(0,100):"…".concat(e.slice(s-10,s+t.length+30),"…")}(l.body,s)):(0,a.si)(o,"search_section_result_default"),...i,children:(0,n.jsxs)("div",{className:"grow border-tint-subtle border-l-2 pl-4",children:[l.title?(0,n.jsx)("p",{className:"font-semibold",children:(0,n.jsx)(P,{query:s,text:l.title})}):null,l.body?function(e,t){let s=e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase());return(0,n.jsx)("p",{className:"wrap-anywhere relative line-clamp-3 text-sm",children:(0,n.jsx)(P,{query:t,text:s<20?e:"…".concat(e.slice(s-10))})})}(l.body,s):null]})})}),D=i.forwardRef(function(e,t){let{children:s,id:l,query:r,results:o,fetching:u,cursor:d,error:h}=e,p=(0,a.ok)(),x=i.useRef([]);i.useEffect(()=>{var e;null!==d&&x.current[d]&&(null==(e=x.current[d])||e.scrollIntoView({block:"nearest",inline:"nearest"}))},[d]);let g=i.useCallback(()=>{var e;null!==d&&x.current[d]&&(null==(e=x.current[d])||e.click())},[d]);i.useImperativeHandle(t,()=>({select:g}),[g]);let{assistants:v}=(0,c.OD)();if(u)return(0,n.jsx)("div",{className:(0,f.P)("flex","items-center","justify-center","py-8","h-full"),children:(0,n.jsx)(m.Rh,{className:(0,f.P)("w-6","text-tint/6")})});if(h)return(0,n.jsxs)("div",{className:(0,f.P)("flex","flex-col","items-center","justify-center","text-center","py-8","h-full","gap-4"),children:[(0,n.jsx)("div",{children:(0,a.t)(p,"search_ask_error")}),(0,n.jsx)(m.$n,{variant:"secondary",size:"small",onClick:()=>window.location.reload(),children:(0,a.t)(p,"unexpected_error_retry")})]});let b=(0,n.jsx)("div",{className:(0,f.P)("flex","items-center","justify-center","text-center","py-8","h-full"),children:(0,a.t)(p,"search_no_results_for",r)});return(0,n.jsxs)("div",{className:(0,f.P)("min-h-full"),children:[s,0===o.length?r?b:(0,n.jsx)("div",{className:"empty"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{"data-testid":"search-results",className:"flex flex-col gap-y-1",id:l,role:"listbox","aria-live":"polite",children:o.map((e,t)=>{let s={"aria-posinset":t+1,"aria-setsize":o.length,id:"".concat(l,"-").concat(t)};switch(e.type){case"page":return(0,n.jsx)(E,{ref:e=>{x.current[t]=e},query:r,item:e,active:t===d,...s},e.id);case"question":return(0,n.jsx)(R,{ref:e=>{x.current[t]=e},question:r,active:t===d,assistant:e.assistant,...s},e.id);case"recommended-question":return(0,n.jsx)(R,{ref:e=>{x.current[t]=e},question:e.question,active:t===d,assistant:v[0],recommended:!0,...s},e.id);case"section":return(0,n.jsx)(M,{ref:e=>{x.current[t]=e},query:r,item:e,active:t===d,...s},e.id);default:(0,L.default)(e)}})}),!o.some(e=>"question"!==e.type)&&b]})]})});function T(e){let{withVariants:t,withSections:s}=e,[l]=(0,k.useSearch)(),r=(0,a.ok)();if(!l)return null;let i=["default","all"].includes(l.scope),o=["extended","all"].includes(l.scope);return(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("span",{className:"mr-1",children:(0,a.t)(r,"search_scope_title")}),s?(0,n.jsx)(O,{isExtended:i,...e}):null,!t||s&&i?null:(0,n.jsx)(U,{isExtended:o,...e})]})}function O(e){var t,s,l;let{isExtended:r,section:i}=e,o=(0,a.ok)(),[,c]=(0,k.useSearch)();return(0,n.jsxs)(m.rI,{button:(0,n.jsx)(m.$n,{variant:"blank",size:"medium",className:"px-2 text-tint-strong",icon:r||null==i?void 0:i.icon,children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.t)(o,r?"search_scope_section_all":"search_scope_section_current",null!=(t=null==i?void 0:i.title)?t:""),(0,n.jsx)(m.ri,{})]})}),children:[(0,n.jsx)(m._2,{leadingIcon:"infinity",className:"gap-3",active:r,onClick:()=>c(e=>e?{...e,scope:"default"}:null),children:(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("span",{className:"text-tint-strong",children:(0,a.t)(o,"search_scope_section_all")}),(0,n.jsx)("span",{className:"text-tint-subtle text-xs",children:(0,a.t)(o,"search_scope_section_all_description")})]})}),(0,n.jsx)(m._2,{leadingIcon:null!=(s=null==i?void 0:i.icon)?s:"crosshairs",className:"gap-3",active:!r,onClick:()=>c(e=>e?{...e,scope:"current"}:null),children:(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("span",{className:"text-tint-strong",children:(0,a.t)(o,"search_scope_section_current",null!=(l=null==i?void 0:i.title)?l:"")}),(0,n.jsx)("span",{className:"text-tint-subtle text-xs",children:(0,a.t)(o,"search_scope_section_current_description")})]})})]})}function U(e){let{isExtended:t,spaceTitle:s,withSections:l}=e,r=(0,a.ok)(),[,i]=(0,k.useSearch)();return(0,n.jsxs)(m.rI,{button:(0,n.jsx)(m.$n,{variant:"blank",size:"medium",className:"px-2",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"text-tint-strong",children:(0,a.t)(r,t?"search_scope_variant_all":"search_scope_variant_current",null!=s?s:"")}),(0,n.jsx)(m.ri,{})]})}),children:[(0,n.jsx)(m._2,{className:"gap-3",active:!t,onClick:()=>i(e=>e?{...e,scope:l?"current":"default"}:null),children:(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("span",{className:"text-tint-strong",children:(0,a.t)(r,"search_scope_variant_current",null!=s?s:"")}),(0,n.jsx)("span",{className:"text-tint-subtle text-xs",children:(0,a.t)(r,"search_scope_variant_current_description")})]})}),(0,n.jsx)(m._2,{className:"gap-3",active:t,onClick:()=>i(e=>e?{...e,scope:"extended"}:null),children:(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("span",{className:"text-tint-strong",children:(0,a.t)(r,"search_scope_variant_all")}),(0,n.jsx)("span",{className:"text-tint-subtle text-xs",children:(0,a.t)(r,"search_scope_variant_all_description")})]})})]})}var F=s(34274);let B=(0,y.createServerReference)("40a8f7039ce68ee4afff844b580ef194901f38642c",y.callServer,void 0,y.findSourceMapURL,"streamRecommendedQuestions"),$=(0,y.createServerReference)("40943adddf8dfe4b9557caf137b95c6ac2ea5028fe",y.callServer,void 0,y.findSourceMapURL,"searchAllSiteContent"),V=(0,y.createServerReference)("60d4f0241f77e033030944db538f9f79a9527bfc07",y.callServer,void 0,y.findSourceMapURL,"searchCurrentSiteSpaceContent"),W=(0,y.createServerReference)("60e29ef25bb15755228369b27f44a3f441622938c8",y.callServer,void 0,y.findSourceMapURL,"searchSpecificSiteSpaceContent"),Q=new Set(["who","what","where","when","why","how","explain","is","are","was","were","do","does","did","which","whom","whose","can","have","give","tell","show","find"]),K=new Map;function H(e){var t,s,a,p,f,x,v,b,y,j;let{siteSpaceId:C,spaceTitle:N,section:S,withVariants:I,withSiteVariants:L,withSections:P,style:z,className:A,viewport:E,siteSpaceIds:R}=e,{assistants:M}=(0,c.OD)(),[O,U]=(0,k.useSearch)(),H=function(){let[e,t]=(0,i.useState)(null);return(0,i.useMemo)(()=>[e,t],[e])}(),Y=(0,r.useRouter)(),Z=(0,d.jt)(),X=(0,i.useRef)(null),G=(0,i.useRef)(null),ee=(0,h.a)(),et=M.length>0,es=M.filter(e=>"search"===e.mode).length>0,en=i.useRef((null==O?void 0:O.ask)===void 0||(null==O?void 0:O.ask)===null);i.useEffect(()=>{var e,t;en.current||0===M.length||(null==O?void 0:O.ask)!==void 0&&(null==O?void 0:O.ask)!==null&&(en.current=!0,null==(e=M[0])||e.open(null!=(t=null==O?void 0:O.ask)?t:void 0))},[null==O?void 0:O.ask,M.length,null==(t=M[0])?void 0:t.open]);let ea=i.useCallback(async e=>{U(e=>e?{...e,open:!1,query:""===e.query?null:e.query}:null),e&&Y.push(e)},[U,Y]);(0,o.vC)("mod+k",e=>{e.preventDefault(),el()},{enableOnFormTags:!0}),(0,o.vC)("mod+i",e=>{if(e.preventDefault(),M){var t;null==(t=M[0])||t.open()}},{enableOnFormTags:!0});let el=i.useCallback(()=>{null!=O&&O.open||(U(e=>{var t,s,n,a;return{ask:et&&null!=(t=null==e?void 0:e.ask)?t:null,scope:null!=(s=null==e?void 0:e.scope)?s:"default",query:null!=(a=null!=(n=null==e?void 0:e.query)?n:es||!et?null==e?void 0:e.ask:null)?a:"",open:!0}}),Z({type:"search_open"}))},[null==O?void 0:O.open,U,Z,et,es]);i.useEffect(()=>{let e=e=>{"Escape"===e.key&&ea()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[ea]);let er=null!=(p=null==O||null==(s=O.query)?void 0:s.trim())?p:"",ei=null!=(f=null==O||null==(a=O.ask)?void 0:a.trim())?f:"",eo=es&&ei,ec="search-results-".concat(i.useId()),{results:eu,fetching:ed,error:eh}=function(e){let{disabled:t,query:s,siteSpaceId:n,siteSpaceIds:a,scope:l}=e,r=(0,d.jt)(),[o,u]=i.useState({results:[],fetching:!1,error:!1}),{assistants:h}=(0,c.OD)(),m=h.length>0;i.useEffect(()=>{if(t)return;if(!s){if(!m)return void u({results:[],fetching:!1,error:!1});if(K.has(n)){let e=K.get(n);(0,F.assert)(e,"Cached recommended questions should be set for site-space ".concat(n)),u({results:e,fetching:!1,error:!1});return}u({results:[],fetching:!1,error:!1});let e=!1,t=new Set,s=[],a=setTimeout(async()=>{if(e)return;let a=await B({siteSpaceId:n});for await(let l of(0,g.S7)(a.stream)){if(!l)continue;let{question:a}=l;!t.has(a)&&(t.add(a),s.push({type:"recommended-question",id:a,question:a}),K.set(n,s),e||u({results:[...s],fetching:!1,error:!1}))}},100);return()=>{e=!0,clearTimeout(a)}}u(e=>({results:e.results,fetching:!0,error:!1}));let e=!1,i=setTimeout(async()=>{try{let t=await (()=>{if("all"===l)return $(s);if("default"===l)return V(s,n);if("extended"===l)return W(s,a);if("current"===l)return W(s,[n]);throw Error("Unhandled search scope: ".concat(l))})();if(e)return;if(!t)return void u({results:[],fetching:!1,error:!0});u({results:t,fetching:!1,error:!1}),r({type:"search_type_query",query:s})}catch(t){if(e)return;u({results:[],fetching:!1,error:!0})}},350);return()=>{e=!0,clearTimeout(i)}},[s,l,r,m,n,a,t]);let p=i.useMemo(()=>m?function(e,t,s){let n=e.filter(e=>"question"!==e.type);if(0===t.length)return n;let a=function(e){if(e.length>25||e.includes("?")||e.includes(" "))return!0;let t=e.toLowerCase().trim().split(/\s+/);if(0===t.length)return!1;for(let e of t)if(Q.has(e))return!0;return!1}(t);return[...a?[]:null!=n?n:[],...s.map((e,s)=>({type:"question",id:"question-".concat(s),query:t,assistant:e})),...a&&null!=n?n:[]]}(o.results,s,h):o.results,[o.results,s,m]);return{...o,results:p}}({disabled:!((null==O?void 0:O.query)||et),query:er,siteSpaceId:C,siteSpaceIds:R,scope:null!=(x=null==O?void 0:O.scope)?x:"default",withAI:et}),em=null!=(b=null!=(v=null==O?void 0:O.query)?v:es||!et?null==O?void 0:O.ask:null)?b:"",{cursor:ep,moveBy:ef}=function(e){let[t,s]=i.useState(null),{query:n,results:a}=e;i.useEffect(()=>{n||s(null)},[n]),i.useEffect(()=>{a.length>0&&s(0)},[a]);let l=i.useCallback(e=>{s(t=>null===t?0:Math.max(Math.min(t+e,a.length-1),0))},[a]);return{cursor:t,setCursor:s,moveBy:l}}({query:er,results:eu});return(0,n.jsxs)(_,{value:H,children:[(0,n.jsx)(m.AM,{content:(null==O?void 0:O.query)||et?(0,n.jsxs)(i.Suspense,{fallback:null,children:[(0,n.jsxs)("div",{className:"scroll-py-2 overflow-y-scroll p-2",children:[null===O||eo?null:(0,n.jsx)(D,{ref:X,query:er,id:ec,fetching:ed,results:eu,cursor:ep,error:eh}),eo?(0,n.jsx)(w,{query:ei}):null]}),(I||P)&&!eo?(0,n.jsx)("div",{className:"border-tint-subtle border-t bg-tint-subtle px-4 py-1.5",children:(0,n.jsx)(T,{section:S,spaceTitle:N,withVariants:I,withSiteVariants:L,withSections:P})}):null]}):null,rootProps:{open:!!(("desktop"===E?!ee:"mobile"!==E||ee)&&null!=(y=null==O?void 0:O.open)&&y),modal:!1},contentProps:{onOpenAutoFocus:e=>e.preventDefault(),align:"start",className:"@container flex flex-col bg-tint-base has-[.empty]:hidden w-128 p-0 max-h-[min(32rem,var(--radix-popover-content-available-height))] max-w-[min(var(--radix-popover-content-available-width),32rem)]",onInteractOutside:e=>{var t;if(null==(t=G.current)?void 0:t.contains(e.target))return void e.preventDefault();ea()},sideOffset:8,collisionPadding:{top:16,right:16,bottom:32,left:16},hideWhenDetached:!0},triggerProps:{asChild:!0},children:(0,n.jsx)(q.SearchInput,{ref:G,value:em,onFocus:el,onChange:e=>{U(t=>{var s,n;return{ask:et&&!es&&null!=(s=null==t?void 0:t.ask)?s:null,query:e,scope:null!=(n=null==t?void 0:t.scope)?n:"default",open:!0}})},onKeyDown:e=>{if("ArrowUp"===e.key)e.preventDefault(),ef(-1);else if("ArrowDown"===e.key)e.preventDefault(),ef(1);else if("Enter"===e.key){var t;e.preventDefault(),null==(t=X.current)||t.select()}},withAI:es,isOpen:null!=(j=null==O?void 0:O.open)&&j,className:A,"aria-controls":ec,"aria-activedescendant":null!==ep?"".concat(ec,"-").concat(ep):void 0,children:(0,n.jsx)(J,{count:eu.length,showing:!!em&&!ed})})}),M.filter(e=>!0===e.ui).map((e,t)=>(0,n.jsx)(u.LN,{assistant:e,withShortcut:0===t,showLabel:1===M.filter(e=>!0===e.ui).length&&z===l.zK.Prominent},e.id))]})}function J(e){let{count:t,showing:s}=e,l=(0,a.ok)();return(0,n.jsx)("div",{className:"sr-only","aria-live":"assertive",role:"alert","aria-relevant":"all",children:s?t>0?(0,a.t)(l,"search_results_count",t):(0,a.t)(l,"search_no_results"):""})}},63243:(e,t,s)=>{s.d(t,{C8:()=>a.useAIChatController,J4:()=>a.useAIChatState,OD:()=>n.useAI});var n=s(96160),a=s(23922)},68039:(e,t,s)=>{s.r(t),s.d(t,{AIChatButton:()=>o});var n=s(54202),a=s(83372),l=s(38103),r=s(86181),i=s(57648);function o(e){let{assistant:t,showLabel:s=!0,withShortcut:o=!0}=e,c=(0,a.ok)();return(0,n.jsx)(r.$n,{icon:t.icon,"data-testid":"ai-chat-button",iconOnly:!s,size:"medium",variant:"header",className:"h-9 px-2.5 max-md:[&_.button-content]:hidden",label:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.t)(c,"ai_chat_ask",t.label),o?(0,n.jsx)(i.S,{keys:["mod","i"],className:"border-tint-11 text-tint-1"}):null]}),onClick:()=>t.open(),children:s?(0,l.t)(c,"ask"):null})}},72952:(e,t,s)=>{s.d(t,{u:()=>o,y:()=>i});var n=s(54202),a=s(23449),l=s(57246),r=s(94543);function i(e){let{className:t="size-4",size:s,trademark:r=!0,state:i="default",...o}=e;return r?(0,n.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",preserveAspectRatio:"xMaxYMid meet",className:t,"aria-busy":"thinking"===i,overflow:"visible",...o,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("title",{children:"GitBook Assistant"}),(0,n.jsx)("path",{d:"M12.8916 1.06265C12.921 0.979101 13.0392 0.979127 13.0685 1.06267C13.239 1.5478 13.3439 1.84646 13.516 2.1032C13.6683 2.33042 13.8578 2.53033 14.0766 2.6945C14.3239 2.88 14.6165 3.00068 15.0919 3.19671C15.1761 3.23142 15.1761 3.3506 15.0919 3.38531C14.6165 3.58134 14.3239 3.70203 14.0766 3.88752C13.8578 4.05169 13.6683 4.2516 13.516 4.47882C13.3439 4.73556 13.239 5.03423 13.0685 5.51937C13.0392 5.60291 12.921 5.60292 12.8916 5.51938C12.7212 5.03423 12.6162 4.73557 12.4442 4.47882C12.2919 4.2516 12.1023 4.05169 11.8835 3.88752C11.6363 3.70202 11.3436 3.58134 10.8682 3.38531C10.7841 3.3506 10.7841 3.23141 10.8683 3.1967C11.3436 3.00067 11.6363 2.87999 11.8835 2.6945C12.1023 2.53033 12.2919 2.33042 12.4442 2.1032C12.6162 1.84646 12.7212 1.54779 12.8916 1.06265Z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round",className:(0,a.P)("intro"===i&&"animate-[fadeIn_.5s_.7s_both,spin_2s_1s_forwards_cubic-bezier(.43,1.54,.64,1)]",("working"===i||"thinking"===i)&&"animate-[fadeIn_.5s_.3s_both,spin_2s_1s_infinite_forwards_cubic-bezier(0.16,1,0.3,1)]","done"===i&&"animate-[fadeOut_.5s_both]","confirm"===i&&"animate-[fadeOut_.5s_both]","default"===i&&"animate-[fadeIn_0s_both]","error"===i&&"hidden"),style:{transformOrigin:"13px 3.5px"}}),(0,n.jsxs)("g",{clipPath:"url(#clip0_153_2034)",className:(0,a.P)("text-danger-subtle","error"===i?"animate-[fadeIn_.5s_.3s_both]":"hidden"),children:[(0,n.jsx)("path",{d:"M13.0312 1.42059L13.0312 3.95184",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),(0,n.jsx)("path",{d:"M13.0312 6.00253V6.00263",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]}),(0,n.jsx)("path",{d:"M10.8051 3.71161L12.2401 5.27411L14.823 2.14911",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",className:(0,a.P)("done"===i?"animate-[fadeIn_.5s_.3s_both]":"animate-[fadeOut_.5s_both]","intro"===i&&"hidden","confirm"===i&&"hidden")}),(0,n.jsx)("path",{className:(0,a.P)("fill-primary-9","confirm"===i?"animate-[fadeIn_.5s_.3s_both,bounceSmall_1s_infinite_both]":"thinking"===i?"animate-[fadeOut_.5s_both]":"hidden"),d:"M12.9463 5.24512C13.3688 5.24422 13.713 5.58625 13.7139 6.00879C13.7146 6.43114 13.3725 6.77338 12.9502 6.77441C12.5279 6.77505 12.1845 6.43408 12.1836 6.01172C12.1828 5.58953 12.5242 5.24649 12.9463 5.24512ZM13.0391 0.0751953C14.0688 0.0730893 14.9049 0.90586 14.9072 1.93555C14.9084 2.5063 14.6484 3.04679 14.2012 3.40137L13.7773 3.7373C13.6151 3.86604 13.5201 4.06239 13.5205 4.26953V4.30371C13.5211 4.62139 13.2639 4.879 12.9463 4.87988C12.6288 4.88032 12.3701 4.62417 12.3691 4.30664V4.27246C12.3679 3.71272 12.6238 3.18263 13.0625 2.83496L13.4854 2.49902C13.6565 2.36341 13.7562 2.1568 13.7559 1.93848C13.755 1.54463 13.4358 1.22503 13.042 1.22559H12.9385C12.488 1.22679 12.1225 1.59352 12.123 2.04395L12.124 2.21875C12.1245 2.53649 11.8676 2.79522 11.5498 2.7959C11.2321 2.79653 10.9746 2.53928 10.9736 2.22168L10.9727 2.04688C10.9706 0.960578 11.8493 0.0778178 12.9355 0.0751953H13.0391Z"}),(0,n.jsx)("path",{d:"M3.5625 8.78512L7.26347 10.9219C7.88227 11.2791 8.64467 11.2791 9.26347 10.9219L14.25 8.0429C14.5833 7.85045 15 8.09101 15 8.47591V10.2777C15 10.4563 14.9047 10.6214 14.75 10.7107L9.26347 13.8784C8.64467 14.2356 7.88228 14.2356 7.26347 13.8784L3.5625 11.7416C2.70833 11.2978 1 9.93199 1 8.01949M1 8.01949C1 6.6448 1.84765 5.98698 2.62903 5.71701C3.15426 5.53555 3.71577 5.70568 4.19701 5.98353L7.26347 7.75395C7.88228 8.11122 8.64467 8.11122 9.26347 7.75395L10.9095 6.80362M1 8.01949C1 6.4945 2.03973 5.30731 2.5596 4.90434L7.37937 2.12165C7.79013 1.88449 8.26417 1.80476 8.71747 1.88245",stroke:"currentColor",strokeOpacity:"0.25",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",className:(0,a.P)("intro"===i&&"animate-[fadeIn_2s_forwards]")}),(0,n.jsx)("mask",{id:"mask0_220_25",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"1",width:"16",height:"14",children:(0,n.jsx)("path",{d:"M3.5625 8.78512L7.26347 10.9219C7.88227 11.2791 8.64467 11.2791 9.26347 10.9219L14.25 8.0429C14.5833 7.85045 15 8.09101 15 8.47591V10.2777C15 10.4563 14.9047 10.6214 14.75 10.7107L9.26347 13.8784C8.64467 14.2356 7.88228 14.2356 7.26347 13.8784L3.5625 11.7416C2.70833 11.2978 1 9.93199 1 8.01949M1 8.01949C1 6.6448 1.84765 5.98698 2.62903 5.71701C3.15426 5.53555 3.71577 5.70568 4.19701 5.98353L7.26347 7.75395C7.88228 8.11122 8.64467 8.11122 9.26347 7.75395L10.9095 6.80362M1 8.01949C1 6.4945 2.03973 5.30731 2.5596 4.90434L7.37937 2.12165C7.79013 1.88449 8.26417 1.80476 8.71747 1.88245",stroke:"currentColor",pathLength:"100",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,n.jsx)("g",{mask:"url(#mask0_220_25)",children:(0,n.jsx)("path",{d:"M3.5625 8.78512L7.26347 10.9219C7.88227 11.2791 8.64467 11.2791 9.26347 10.9219L14.25 8.0429C14.5833 7.85045 15 8.09101 15 8.47591V10.2777C15 10.4563 14.9047 10.6214 14.75 10.7107L9.26347 13.8784C8.64467 14.2356 7.88228 14.2356 7.26347 13.8784L3.5625 11.7416C2.70833 11.2978 1 9.93199 1 8.01949C1 6.6448 1.84765 5.98698 2.62903 5.71701C3.15426 5.53555 3.71577 5.70568 4.19701 5.98353L7.26347 7.75395C7.88228 8.11122 8.64467 8.11122 9.26347 7.75395L14.1991 4.90434L9.37937 2.12165C8.76057 1.76438 7.99907 1.76386 7.38027 2.12113C5.89314 2.97972 3.20298 4.53289 2.5596 4.90434C1.77376 5.35804 1 6.11597 1.00148 7.9207",stroke:"currentColor",pathLength:"100",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",className:(0,a.P)(("thinking"===i||"working"===i)&&"animate-[pathLoading_2s_infinite_both]","intro"===i&&"animate-[pathEnter_2s_both]","done"===i&&"animate-[pathEnter_1s_forwards_ease]")})})]}):(0,n.jsx)(l.Icon,{icon:"sparkle",...o,className:(0,a.P)(t,("thinking"===i||"working"===i)&&"animate-[spin_2s_infinite_forwards_cubic-bezier(0.16,1,0.3,1)]","intro"===i&&"animate-[spin_2s_forwards_cubic-bezier(0.16,1,0.3,1)]")})}function o(e){let{className:t="size-4",state:s="default"}=e;return(0,n.jsxs)("div",{className:(0,a.P)("relative","intro"===s&&"animate-[fadeIn_1s_both,orbit_1s_cubic-bezier(0.16,1,0.3,1)]","thinking"===s||"working"===s?"animate-[fadeIn_1s_both,orbit_1s_ease-out,orbit_2s_1s_infinite_forwards_linear]":""),children:[(0,n.jsx)(l.Icon,{icon:"search",className:t}),(0,n.jsx)(l.Icon,{icon:"sparkle",iconStyle:r.p.Solid,className:(0,a.P)("absolute top-[15.7%] left-[15.6%] size-[50%]","thinking"===s||"working"===s?"animate-[spin_2s_infinite_forwards_cubic-bezier(0.16,1,0.3,1)]":"","intro"===s?"animate-[spin_2s_.5s_forwards_cubic-bezier(0.16,1,0.3,1)]":"")})]})}},75178:(e,t,s)=>{s.d(t,{t:()=>p,h:()=>f});var n=s(54202),a=s(83372),l=s(38103),r=s(23449),i=s(65179),o=s(97796),c=s(86181),u=s(57648);function d(e){let{chat:t}=e,s=(0,a.ok)();return(0,o.vC)("mod+enter",e=>{var s;e.preventDefault(),null==(s=t.pendingTools[0])||s.confirm()},{enableOnFormTags:!0},[t.pendingTools]),(0,n.jsx)("div",{className:"flex w-full flex-wrap justify-end gap-2",children:t.pendingTools.map((e,t)=>(0,n.jsxs)("div",{className:"flex w-full animate-present-slow flex-col gap-1",style:{animationDelay:"".concat(.5+.1*t,"s")},children:[(0,n.jsx)(c.$n,{onClick:()=>{e.confirm()},tabIndex:t,label:e.label,className:"w-full justify-center",size:0===t?"default":"medium",variant:0===t?"primary":"secondary",icon:e.icon}),0===t&&(0,n.jsx)("div",{className:"flex pointer-none:hidden w-full animate-fade-in-slow items-center justify-end gap-2 text-tint text-xs",style:{animationDelay:"1000ms"},children:(0,l.t)(s,"press_to_confirm",(0,n.jsx)(u.S,{keys:["mod","enter"],className:"mx-0 text-tint"}))})]},t))})}var h=s(13885);function m(e){let{chat:t,chatController:s}=e;return 0===t.followUpSuggestions.length?null:(0,n.jsx)("div",{className:"mt-auto flex w-full flex-wrap justify-end gap-2",children:t.followUpSuggestions.map((e,t)=>(0,n.jsx)(c.$n,{onClick:()=>{s.postMessage({message:e})},label:e,className:"whitespace-normal! max-w-full animate-[present_500ms_both] text-left ring-1 ring-tint-subtle",size:"medium",variant:"blank",style:{animationDelay:"".concat(250+Math.min(50*t,150),"ms")}},t))})}function p(e){let{chat:t,chatController:s,lastUserMessageRef:a}=e;return(0,n.jsx)(n.Fragment,{children:t.messages.map((e,l)=>{let o=l===t.messages.length-1,c=e.role===i.W7.User&&l===t.messages.map(e=>e.role).lastIndexOf(i.W7.User);return(0,n.jsxs)("div",{ref:c?a:void 0,"data-testid":"ai-chat-message",className:(0,r.P)(e.content?"animate-fade-in-slow":"","shrink-0","last:min-h-[calc(100%-5rem)]","scroll-mt-36","lg:scroll-mt-0","flex flex-col gap-6","break-words","group/message",e.role===i.W7.User?"max-w-[80%] self-end circular-corners:rounded-2xl rounded-corners:rounded-md bg-tint px-4 py-2":"text-tint-strong"),style:{animationDelay:"".concat(Math.min(.05*l,.5),"s")},children:[e.content?e.content:null,o&&t.loading?(0,n.jsxs)("div",{className:"flex w-full animate-fade-in-slow flex-col gap-2",children:[e.content?null:(0,n.jsx)(f,{}),(0,n.jsx)(x,{})]}):null,o?(0,n.jsxs)(n.Fragment,{children:[!t.loading&&!t.error&&t.query&&t.responseId&&0===t.pendingTools.length?(0,n.jsx)(h.AIResponseFeedback,{responseId:t.responseId,query:t.query,className:"-ml-1 -mt-4"}):null,(0,n.jsx)(d,{chat:t}),(0,n.jsx)(m,{chat:t,chatController:s})]}):null]},l)})})}function f(e){let{breakLines:t=!1,className:s=""}=e,i=(0,a.ok)();return(0,n.jsxs)("div",{className:(0,r.P)("animate-[heightIn_500ms_4500ms_ease_both] overflow-hidden py-2 text-tint-subtle",s),children:[(0,l.s)(i,"ai_chat_hold_message_1").split(" ").map((e,t)=>(0,n.jsxs)("span",{className:"animate-fade-in-slow",style:{animationDelay:"".concat(5e3+200*t,"ms")},children:[e," "]},t)),t?(0,n.jsx)("br",{}):null,(0,l.s)(i,"ai_chat_hold_message_2").split(" ").map((e,t)=>(0,n.jsxs)("span",{className:"animate-fade-in-slow",style:{animationDelay:"".concat(1e4+200*t,"ms")},children:[e," "]},t))]})}function x(){return(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:Array.from({length:7}).map((e,t)=>(0,n.jsx)("div",{className:"h-4 animate-[fadeIn_500ms_ease_both,pulse_1.5s_infinite] circular-corners:rounded-2xl rounded-corners:rounded-md bg-tint-4",style:{width:"calc(".concat(t%4*20+10,"% - 4px)"),animationDelay:"".concat(.1*t,"s")}},t))})}},75265:(e,t,s)=>{s.d(t,{Fo:()=>n.AIChatBody,LN:()=>a.AIChatButton,Rk:()=>n.AIChatSubtitle,Xo:()=>n.AIChatDynamicIcon,YZ:()=>n.getAIChatName,k6:()=>i.AIChatControlButton,ph:()=>r.AIResponseFeedback,ur:()=>l.u,yQ:()=>l.y});var n=s(89339),a=s(68039),l=s(72952),r=s(13885),i=s(24066)},81493:(e,t,s)=>{s.d(t,{Lt:()=>n.SearchContextProvider,SQ:()=>n.useSearch}),s(81853),s(61750);var n=s(86628)},81853:(e,t,s)=>{s.r(t),s.d(t,{SearchInput:()=>h});var n=s(54202),a=s(59282),l=s(83372),r=s(23449),i=s(57246),o=s(86181),c=s(57648),u=s(36945);let d=["text-sm","px-3.5","py-1.5","md:circular-corners:px-4"],h=a.forwardRef(function(e,t){let{onChange:s,onKeyDown:h,onFocus:m,value:p,withAI:f,isOpen:x,className:g,children:v,...b}=e,_=(0,a.useRef)(null),y=(0,l.ok)(),j=(0,u.K)(["ButtonStyles"]);return(0,a.useEffect)(()=>{var e,t,s;x?document.activeElement!==_.current&&(null==(e=_.current)||e.focus({preventScroll:!0}),null==(t=_.current)||t.setSelectionRange(p.length,p.length)):null==(s=_.current)||s.blur()},[x,p]),(0,n.jsx)("div",{className:(0,r.P)("relative flex size-9 grow",g),children:(0,n.jsxs)("div",{ref:t,onClick:m,className:(0,r.P)(j,o.ST.header,d,"has-[input:focus]:-translate-y-px h-9 grow cursor-pointer px-2.5 has-[input:focus]:bg-tint-base has-[input:focus]:depth-subtle:shadow-lg has-[input:focus]:depth-subtle:shadow-primary-subtle has-[input:focus-visible]:ring-2 has-[input:focus-visible]:ring-primary-hover md:cursor-text","theme-bold:border-header-link/3 has-[input:focus-visible]:theme-bold:border-header-link/5 has-[input:focus-visible]:theme-bold:bg-header-link/3 has-[input:focus-visible]:theme-bold:ring-header-link/5","theme-bold:before:absolute theme-bold:before:inset-0 theme-bold:before:bg-header-background/7 theme-bold:before:backdrop-blur-xl ","relative z-30 max-w-none shrink grow justify-start max-md:absolute max-md:right-0",x?"max-md:w-56":"max-md:w-[38px]"),children:[p&&x?(0,n.jsx)(o.$n,{variant:"blank",label:(0,l.si)(y,"clear"),size:"medium",iconOnly:!0,icon:"circle-xmark",className:"-ml-1.5 -mr-1 animate-scale-in px-1.5 theme-bold:text-header-link theme-bold:hover:bg-header-link/3",onClick:()=>{var e;s(""),null==(e=_.current)||e.focus()}}):(0,n.jsx)(i.Icon,{icon:"magnifying-glass",className:"size-4 shrink-0 animate-scale-in"}),v,(0,n.jsx)("input",{...b,type:"text",onFocus:m,onKeyDown:h,onChange:e=>s(e.target.value),value:p,placeholder:"".concat((0,l.si)(y,f?"search_or_ask":"search"),"…"),maxLength:512,size:10,"data-testid":"search-input",className:(0,r.P)("peer z-10 min-w-0 grow bg-transparent py-0.5 text-tint-strong theme-bold:text-header-link outline-hidden transition-[width] duration-300 contain-paint placeholder:text-tint theme-bold:placeholder:text-current theme-bold:placeholder:opacity-7",x?"":"max-md:opacity-0"),role:"combobox",autoComplete:"off","aria-autocomplete":"list","aria-haspopup":"listbox","aria-expanded":p&&x?"true":"false",ref:_}),(0,n.jsx)(c.S,{keys:x?["esc"]:["mod","k"],className:"last:-mr-1 theme-bold:border-header-link/5 theme-bold:bg-header-background theme-bold:text-header-link"})]})})})},86628:(e,t,s)=>{s.r(t),s.d(t,{SearchContext:()=>i,SearchContextProvider:()=>o,useSearch:()=>c,useSearchLink:()=>u});var n=s(54202),a=s(767),l=s(59282);let r={q:a.tU,ask:a.tU,scope:(0,a.M1)(["all","default","extended","current"]).withDefault("default"),global:a.cr},i=l.createContext(null);function o(e){let{children:t}=e,[s,o]=(0,a.ab)(r,{history:"replace"});l.useEffect(()=>{(null==s?void 0:s.ask)==="true"&&(null==s?void 0:s.q)&&o({q:null,ask:s.q}),(null==s?void 0:s.global)===!0&&o({scope:"all",global:null})},[s,o]);let[c,u]=l.useState(()=>(null==s?void 0:s.q)!==null),d=l.useMemo(()=>null===s||null===s.q&&null===s.ask?null:{query:s.q,ask:s.ask,scope:s.scope,open:c},[s,c]),h=l.useRef(d);l.useLayoutEffect(()=>{h.current=d},[d]);let m=l.useCallback(e=>("function"==typeof e&&(e=e(h.current)),null===e)?(u(!1),o({q:null,ask:null,scope:"default"})):(u(e.open),o({q:e.query,ask:e.ask,scope:e.scope})),[o]);return(0,n.jsx)(i.Provider,{value:{state:d,setState:m},children:t})}function c(){let e=l.useContext(i);if(!e)throw Error("useSearch must be used within SearchContextProvider");return[e.state,e.setState]}function u(){let[,e]=c();return l.useCallback((t,s)=>{let n=new URLSearchParams;return t.query?n.set("q",t.query):n.delete("q"),t.ask?n.set("ask",t.ask):n.delete("ask"),t.scope?n.set("scope",t.scope):n.delete("scope"),{href:"?".concat(n.toString()),prefetch:!1,onClick:n=>{n.preventDefault(),null==s||s(),e(e=>({...e,query:void 0!==t.query?t.query:null,ask:void 0!==t.ask?t.ask:null,scope:void 0!==t.scope?t.scope:"default",open:void 0!==t.open&&t.open}))}}},[e])}},89339:(e,t,s)=>{s.r(t),s.d(t,{AIChat:()=>_,AIChatBody:()=>k,AIChatDynamicIcon:()=>y,AIChatSubtitle:()=>j,getAIChatName:()=>C});var n=s(54202),a=s(83372),l=s(57246),r=s(59282),i=s(97796),o=s(63243),c=s(41784),u=s(70932),d=s(10330),h=s(86181),m=s(24066),p=s(72952),f=s(23449),x=s(57648);function g(e){let{value:t,onChange:s,onSubmit:o,disabled:c,loading:u}=e,d=(0,a.ok)(),m=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!c&&!u){let e=setTimeout(()=>{var e;null==(e=m.current)||e.focus()},150);return()=>clearTimeout(e)}},[c,u]),(0,i.vC)("mod+i",e=>{var t;e.preventDefault(),null==(t=m.current)||t.focus()},{enableOnFormTags:!0}),(0,n.jsxs)("div",{className:"depth-subtle:has-[textarea:focus]:-translate-y-px relative flex flex-col overflow-hidden circular-corners:rounded-2xl rounded-corners:rounded-md bg-tint-base/9 depth-subtle:shadow-sm shadow-tint/6 ring-1 ring-tint-subtle backdrop-blur-lg transition-all depth-subtle:has-[textarea:focus]:shadow-lg has-[textarea:focus]:shadow-primary-subtle has-[textarea:focus]:ring-2 has-[textarea:focus]:ring-primary-hover contrast-more:bg-tint-base dark:shadow-tint-1",children:[(0,n.jsx)("textarea",{ref:m,disabled:c||u,"data-loading":u,"data-testid":"ai-chat-input",className:(0,f.P)("resize-none","focus:outline-hidden","focus:ring-0","w-full","px-3","py-3","pb-12","h-auto","bg-transparent","peer","max-h-64","placeholder:text-tint/8","transition-colors","disabled:bg-tint-subtle","delay-300","disabled:delay-0","disabled:cursor-not-allowed","data-[loading=true]:cursor-progress","data-[loading=true]:opacity-50"),value:t,rows:1,placeholder:(0,a.si)(d,"ai_chat_input_placeholder"),onChange:e=>{let t=e.currentTarget;s(t.value),t.style.height="auto",t.style.height="".concat(t.scrollHeight,"px")},onKeyDown:e=>{if("Escape"===e.key){e.preventDefault(),e.currentTarget.blur();return}"Enter"===e.key&&!e.shiftKey&&t.trim()&&(e.preventDefault(),e.currentTarget.style.height="auto",o(t))}}),c?null:(0,n.jsx)("div",{className:"absolute top-2.5 right-3 animate-[fadeIn_0.2s_0.5s_ease-in-out_both] peer-focus:hidden",children:(0,n.jsx)(x.S,{keys:["mod","i"],className:"bg-tint-base"})}),(0,n.jsxs)("div",{className:"absolute inset-x-0 bottom-0 flex items-center gap-2 px-2 py-2",children:[(0,n.jsxs)(h.z8,{children:[(0,n.jsx)(h.jc,{className:"max-w-xs bg-tint p-2 text-sm text-tint",arrow:{className:"fill-tint-3"},children:(0,n.jsxs)("div",{className:"flex flex-col gap-3 p-2",children:[(0,n.jsx)("p",{className:"font-semibold",children:(0,a.t)(d,"ai_chat_context_description")}),(0,n.jsxs)("ul",{className:"flex flex-col gap-2",children:[(0,n.jsxs)("li",{className:"flex items-center gap-2",children:[(0,n.jsx)(l.Icon,{icon:"memo",className:"size-3.5 opacity-7"}),(0,a.t)(d,"ai_chat_context_pages_youve_read")]}),(0,n.jsxs)("li",{className:"flex items-center gap-2",children:[(0,n.jsx)(l.Icon,{icon:"user",className:"size-3.5 opacity-7"}),(0,a.t)(d,"ai_chat_context_info_provided_by_the_site")]}),(0,n.jsxs)("li",{className:"flex items-center gap-2",children:[(0,n.jsx)(l.Icon,{icon:"message-question",className:"size-3.5 opacity-7"}),(0,a.t)(d,"ai_chat_context_previous_messages")]})]}),(0,n.jsx)("p",{children:(0,a.t)(d,"ai_chat_context_disclaimer")})]})}),(0,n.jsx)(h.d0,{children:(0,n.jsxs)("div",{className:"flex cursor-help items-center gap-1 circular-corners:rounded-2xl rounded-corners:rounded-md px-2.5 py-1.5 text-tint/7 text-xs transition-all hover:bg-tint",children:[(0,n.jsx)("span",{className:"-ml-1 circular-corners:rounded-2xl rounded-corners:rounded-sm bg-tint-11/7 px-1 py-0.5 font-mono font-semibold text-[0.65rem] text-contrast-tint-11 leading-none",children:(0,a.t)(d,"ai_chat_context_badge")})," ",(0,n.jsx)("span",{className:"leading-none",children:(0,a.t)(d,"ai_chat_context_title")}),(0,n.jsx)(l.Icon,{icon:"question-circle",className:"size-3 shrink-0"})]})})]}),(0,n.jsx)(h.$n,{label:(0,a.si)(d,"send"),size:"medium",className:"ml-auto",disabled:c||!t.trim(),onClick:()=>o(t)})]})]})}var v=s(75178);function b(e){let t=(0,a.ok)(),{chatController:s,suggestions:l=[(0,a.si)(t,"ai_chat_suggested_questions_about_this_page"),(0,a.si)(t,"ai_chat_suggested_questions_read_next"),(0,a.si)(t,"ai_chat_suggested_questions_example")]}=e;return(0,n.jsx)("div",{className:"flex flex-col items-center gap-2",children:l.map((e,t)=>(0,n.jsx)(h.$n,{variant:"secondary",size:"medium",className:"max-w-full animate-[present_500ms_both] whitespace-normal",style:{animationDelay:"".concat(800+100*t,"ms")},onClick:()=>s.postMessage({message:e}),children:e},e))})}function _(e){let{trademark:t}=e,s=(0,a.ok)(),l=(0,o.J4)(),d=(0,o.C8)(),p=r.useRef(null);r.useEffect(()=>{if(l.opened){var e;null==(e=p.current)||e.scrollIntoView({behavior:"smooth",block:"start"})}},[l.opened]),(0,i.vC)("esc",()=>{d.close()},[]);let f=(0,u.jt)();return(r.useEffect(()=>{l.opened&&f({type:"ask_view"})},[l.opened,f]),l.opened)?(0,n.jsx)("div",{"data-testid":"ai-chat",className:"ai-chat inset-y-0 right-0 z-40 mx-auto flex max-w-3xl animate-present scroll-mt-36 px-4 py-4 transition-all duration-300 sm:px-6 lg:fixed lg:w-80 lg:animate-enter-from-right lg:pr-4 lg:pl-0 xl:w-96",children:(0,n.jsxs)(c.VN,{className:"relative circular-corners:rounded-3xl rounded-corners:rounded-md depth-subtle:shadow-lg shadow-tint ring-1 ring-tint-subtle",children:[(0,n.jsxs)(c.Ac,{children:[(0,n.jsx)(y,{trademark:t}),(0,n.jsxs)(c.Do,{children:[(0,n.jsx)(c.tP,{children:C(s,t)}),(0,n.jsx)(j,{chat:l})]}),(0,n.jsxs)(c.a8,{children:[(0,n.jsx)(m.AIChatControlButton,{}),(0,n.jsx)(h.$n,{onClick:()=>d.close(),iconOnly:!0,icon:"close",label:(0,a.si)(s,"close"),variant:"blank",size:"default"})]})]}),(0,n.jsx)(c.XO,{children:(0,n.jsx)(k,{chatController:d,chat:l,trademark:t})})]})}):null}function y(e){var t;let{trademark:s}=e,a=(0,o.J4)();return(0,n.jsx)(p.y,{className:"size-5 text-tint",trademark:s,state:a.error?"error":a.loading?(null==(t=a.messages[a.messages.length-1])?void 0:t.content)?"working":"thinking":a.messages.length>0?a.pendingTools.length>0?"confirm":"done":"default"})}function j(e){var t;let{chat:s}=e,l=(0,a.ok)();return(0,n.jsx)(c.bY,{className:s.loading?"h-3 opacity-11":"h-0 opacity-0",children:(null==(t=s.messages[s.messages.length-1])?void 0:t.content)?(0,a.si)(l,"ai_chat_working"):(0,a.si)(l,"ai_chat_thinking")})}function k(e){let{chatController:t,chat:s,trademark:l,suggestions:i}=e,[o,c]=r.useState(""),u=r.useRef(null),h=r.useRef(null),m=r.useRef(null),[f,x]=r.useState(0),_=(0,a.ok)(),y=(0,d.cB)(36e5),j=!s.messages.length,k=r.useMemo(()=>{let e=new Date(y).getHours();return e<6?(0,a.si)(_,"ai_chat_assistant_greeting_night"):e<12?(0,a.si)(_,"ai_chat_assistant_greeting_morning"):e<18?(0,a.si)(_,"ai_chat_assistant_greeting_afternoon"):(0,a.si)(_,"ai_chat_assistant_greeting_evening")},[y,_]);return r.useEffect(()=>{s.messages.length>0&&h.current&&h.current.scrollIntoView({behavior:"smooth",block:"start"})},[s.messages.length]),r.useEffect(()=>{let e=setTimeout(()=>{h.current&&h.current.scrollIntoView({behavior:"smooth",block:"start"})},100),t=new ResizeObserver(e=>{e.forEach(e=>{x(e.contentRect.height+32)})});return m.current&&t.observe(m.current),()=>{t.disconnect(),clearTimeout(e)}},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{ref:u,className:"gutter-stable flex grow scroll-pt-4 flex-col gap-4 overflow-y-auto p-4",style:{paddingBottom:"".concat(f,"px")},children:j?(0,n.jsxs)("div",{className:"flex min-h-full w-full shrink-0 flex-col items-center justify-center gap-6 py-4",children:[(0,n.jsx)("div",{className:"flex size-32 animate-fade-in-slow items-center justify-center rounded-full bg-tint-subtle",children:(0,n.jsx)(p.y,{state:"intro",trademark:l,className:"size-16 animate-[present_500ms_200ms_both]"})}),(0,n.jsxs)("div",{className:"animate-[fadeIn_500ms_400ms_both]",children:[(0,n.jsx)("h5",{className:" text-center font-bold text-lg text-tint-strong",children:k}),(0,n.jsx)("p",{className:"text-center text-tint",children:(0,a.t)(_,"ai_chat_assistant_description")})]}),s.error?null:(0,n.jsx)(b,{chatController:t,suggestions:i})]}):(0,n.jsx)(v.t,{chat:s,chatController:t,lastUserMessageRef:h})}),(0,n.jsxs)("div",{ref:m,className:"absolute inset-x-0 bottom-0 mr-2 flex select-none flex-col gap-4 bg-linear-to-b from-transparent to-50% to-tint-base/9 p-4 pr-2",children:[s.error?(0,n.jsx)(w,{chatController:t}):null,(0,n.jsx)(g,{value:o,onChange:c,loading:s.loading,disabled:s.loading||s.error,onSubmit:()=>{t.postMessage({message:o}),c("")}})]})]})}function w(e){let t=(0,a.ok)(),{chatController:s}=e;return(0,n.jsxs)("div",{className:"flex animate-scale-in flex-wrap justify-between gap-2 circular-corners:rounded-2xl rounded-corners:rounded-md bg-danger px-3 py-2 text-danger text-sm ring-1 ring-danger",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(l.Icon,{icon:"exclamation-triangle",className:"size-3.5"}),(0,n.jsx)("span",{className:"flex items-center gap-1",children:(0,a.t)(t,"ai_chat_error")})]}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)(h.$n,{variant:"blank",size:"small",icon:"refresh",label:(0,a.si)(t,"unexpected_error_retry"),onClick:()=>{s.clear()},className:"text-danger! hover:bg-danger-5"})})]})}function C(e,t){return t?(0,a.si)(e,"ai_chat_assistant_name"):(0,a.si)(e,"ai_chat_assistant_name_unbranded")}},90802:(e,t,s)=>{s.d(t,{K:()=>i,SpaceLayoutContextProvider:()=>r});var n=s(54202),a=s(59282);let l=a.createContext({basePath:""});function r(e){let{basePath:t,children:s}=e,r=a.useMemo(()=>({basePath:t}),[t]);return(0,n.jsx)(l.Provider,{value:r,children:s})}function i(){let e=a.useContext(l);if(!e)throw Error("SpaceLayoutContext not found");return e.basePath}},91625:(e,t,s)=>{s.r(t),s.d(t,{LoadIntegrations:()=>u,integrationAssistants:()=>o,integrationsAssistantTools:()=>i,useIntegrationAssistants:()=>c});var n=s(59282),a=s(95196),l=s(80532);let r=new Map,i=a.y(()=>({tools:[]})),o=a.y(()=>[]);function c(){return l.P(o)}function u(){return n.useEffect(()=>{!function(e){for(var t,s=arguments.length,n=Array(s>1?s-1:0),a=1;a<s;a++)n[a-1]=arguments[a];null==(t=r.get(e))||t.forEach(e=>e(...n))}("load")},[]),null}window.GitBook={addEventListener:(e,t)=>{var s;let n=null!=(s=r.get(e))?s:[];n.push(t),r.set(e,n)},removeEventListener:(e,t)=>{var s;let n=null!=(s=r.get(e))?s:[],a=n.indexOf(t);-1!==a&&n.splice(a,1)},registerTool:e=>{i.setState(t=>({tools:[...t.tools,e]}))},registerAssistant:e=>{let t=window.crypto.randomUUID();return o.setState(s=>{var n;return[...s,{...e,id:t,ui:null==(n=e.ui)||n,mode:"overlay",pageAction:!1}]},!0),()=>{o.setState(e=>e.filter(e=>e.id!==t),!0)}}}},96160:(e,t,s)=>{s.r(t),s.d(t,{AIContextProvider:()=>m,useAI:()=>p});var n=s(54202),a=s(65179),l=s(57246),r=s(59282),i=s(83372),o=s(63243),c=s(75265),u=s(99682),d=s(86628);let h=r.createContext(null);function m(e){let{aiMode:t,trademark:s,children:a}=e,l=r.useMemo(()=>({aiMode:t,trademark:s}),[t,s]);return(0,n.jsx)(h.Provider,{value:l,children:a})}function p(){let e=function(){let e=r.useContext(h);if(!e)throw Error("useAI must be used within AIContextProvider");return e}(),t=(0,o.J4)(),s=(0,o.C8)(),m=(0,i.ok)(),[,p]=(0,d.useSearch)(),f=[];e.aiMode===a.RN.Assistant?f.push({id:"gitbook-assistant",label:(0,c.YZ)(m,e.trademark),icon:(0,n.jsx)(c.yQ,{state:t.loading?"thinking":"default",trademark:e.trademark}),open:e=>{s.open(),e&&s.postMessage({message:e})},pageAction:!0,ui:!0,mode:"sidebar"}):e.aiMode===a.RN.Search&&f.push({id:"gitbook-ai-search",label:(0,i.si)(m,"ai_chat_context_badge"),icon:(0,n.jsx)(c.ur,{}),open:e=>{e&&p(t=>t?{...t,query:null,ask:e,open:!0}:null)},pageAction:!1,ui:!1,mode:"search"});let x=(0,u.r0)();return x.length>0&&f.push(...x.map(e=>({...e,icon:(0,n.jsx)(l.Icon,{icon:e.icon,className:"size-4"}),open:t=>{p(e=>{var t,s;return{ask:null,query:null!=(t=null==e?void 0:e.query)?t:null,scope:null!=(s=null==e?void 0:e.scope)?s:"default",open:!1}}),e.open(t)}}))),{config:e,assistants:f}}},99682:(e,t,s)=>{s.d(t,{By:()=>n.integrationsAssistantTools,r0:()=>n.useIntegrationAssistants});var n=s(91625)}}]);